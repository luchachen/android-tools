From 9b5d8450d105366e928fb9de104875c92388ac12 Mon Sep 17 00:00:00 2001
From: chunhuachen <chunhuachen@ruijie.com.cn>
Date: Mon, 3 Jun 2024 17:20:25 +0800
Subject: [PATCH] fix build c++14

---
 libc/bionic/system_property_set.cpp       | 2 +-
 libc/system_properties/contexts_split.cpp | 1 +
 2 files changed, 2 insertions(+), 1 deletion(-)

diff --git a/libc/bionic/system_property_set.cpp b/libc/bionic/system_property_set.cpp
index 656e43317..ab5c0122d 100644
--- a/libc/bionic/system_property_set.cpp
+++ b/libc/bionic/system_property_set.cpp
@@ -222,7 +222,7 @@ static int send_prop_msg(const prop_msg* msg) {
 static constexpr uint32_t kProtocolVersion1 = 1;
 static constexpr uint32_t kProtocolVersion2 = 2;  // current
 
-static atomic_uint_least32_t g_propservice_protocol_version = 0;
+static atomic_uint_least32_t g_propservice_protocol_version{0};
 
 static void detect_protocol_version() {
   char value[PROP_VALUE_MAX];
diff --git a/libc/system_properties/contexts_split.cpp b/libc/system_properties/contexts_split.cpp
index 7ba835ae2..fa352706f 100644
--- a/libc/system_properties/contexts_split.cpp
+++ b/libc/system_properties/contexts_split.cpp
@@ -33,6 +33,7 @@
 #include <stdlib.h>
 #include <string.h>
 #include <sys/stat.h>
+#include <cstdio>
 
 #include <async_safe/log.h>
 
-- 
2.34.1

